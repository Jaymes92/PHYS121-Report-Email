# PHYS121-Report-Email

# Required files, their formats, and locations:
- ### submissions.zip
  - **Format**: Direct download from Canvas for whatever submission we are grading/distributing. This is downloaded on a per-assignment and per-day basis to ensure you have the most recent submissions for the assignment of interest. Note that Canvas doesn't let you download a subset of section's submissions, it will download the every student's submission for the selected assignment every time. Example of where to download submissions for 'Lab 0':

  <p align="center">
  <img src="https://user-images.githubusercontent.com/83324898/218165602-c1d1e5e7-bfdf-4af2-ba30-b2e89fd304ab.png" alt="download_submissions" width="150" />
  </p>

  - **Location and Name**: Located in the root directory. You can store it anywhere and name it anything as long as you update the location of the `MAIN_ZIP` variable in `unzipper.py`.
- ### Canvas_Gradebook_Export.csv
  - **Format**: Direct download of entire Gradebook from Canvas. This is used to map student "ID" in Canvas, to their "Student Number", which are two different numbers. This means it can change when registration is open for students to switch sections. Once registration is locked, it shouldn't need to be downloaded again (unless a student has a special section switch request). Example of where to download:
  
  
  <p align="center">
  <img src="https://user-images.githubusercontent.com/83324898/218166529-5d5c6501-b12f-4c87-8746-e2699b148e16.png" alt="export_gradebook" width="200" />
  </p>

  - **Location and Name**: Located in the root directory. Changes to name/location require updating the path in the `canvas_grades_df` variable - located in `initialze_paths()` in `report_generator.py`.

- ### TA_info.json
    - **Format**: Store 'email' and 'name' accessed by lab section key value. Need one entry per lab section.

```javascript
{
"L01": {"email": "ta1@ubc.ca",
        "name": "TA1_name"},
"L02": {"email": "ta2@ubc.ca",
        "name": "TA2_name"}
}
```
  - **Location and Name**: Located in root directory and named *TA_info.json*. If it is to be renamed or moved, update the path in `TA_INFO` variable in `main.py`.

- ### final_grades.csv
  - **Format**: Direct output from otter-grader for whatever assignment we are grading/distributing. 
  - **Location and Name**: Needs to go in the folder for whatever assignment we are grading/distributing. EX: If we are doing lab 1, it should be in `Lab 1\final_grades.csv`. Changes to name/location require updating the path in the `final_grades_df` variable - located in `initialze_paths()` in `report_generator.py`.

- ### Solution File - otter-grader output
  - **Format**: This is the pdf generated by running a solution .ipynb through otter-grader.
  - **Location and Name**: Needs to go in the folder for whatever assignment we are grading/distributing and named `_PHYS 121 - {ASSIGNMENT_NAME} - soln.pdf`. Changes to name/location require updating the path in the `solution_file` variable - located in `initialze_paths()` in `report_generator.py`.

- ### Solution File - full print
  - **Format**: This is a full website print (as a pdf) of the solution .ipynb.
  - **Location and Name**: Needs to go in the folder for whatever assignment we are grading/distributing and named `_PHYS 121 - {ASSIGNMENT_NAME} - soln (.ipynb complete print).pdf`. Changes to name/location require updating the path in the `solution_file_full_print` variable - located in `initialze_paths()` in `report_generator.py`.

- ### Assignment config files
  - **Format**: There are three columns. ```Ignore```, ```Manual Grade```, and ```Manual Questions```.
    - ```Ignore``` is used to list questions (one per row) that have auto-graded tests, but are worth 0 marks. These are sometimes used to check the format of student's answers, without being worth any marks. Putting them in this column will stop these questions from showing up on the cover pages.
    - ```Manual Grade``` has just one row which contains the total grade that the manual portion of the lab report is worth.
    - ```Manual Questions``` is used to list questions (one per row) and the number of marks that question is worth. Each row has a format of {question_name},{question_grade}. For example, if the question labelled 'q3.1' was worth 3 marks, that row would be input as ```q3.1,1```.
  - **Location and Name**: There is one config file for each assignment. One is located in each individual lab/pre-lab directory. It is named ```{assignment_name} Config.csv```. For example, the path for the config file for lab 5 would be ```/Lab 5/Lab 5 Config.csv```.

# Setting the sending e-mail:
In ```main.py``` there is the line ```mail.SentOnBehalfOfName = "physics.labs@ubc.ca"```. This causes the e-mails to be sent from this e-mail address. If the user running the scripts does not have this e-mail added to their Outlook, you can comment out this line to have it send from your regular signed-in Outlook e-mail address.

# Running the program:
1. Add required files. On a daily basis this will be: `submissions.zip` and `final_grades.csv` only, for each assignment being graded. The answer files only ever have to be updated if there are lab changes. The TA information and Canvas gradebook export only have to be updated one per term.
2. All variables are fed in via the command line. The first argument will be the assignment being distributed, the second is as many lab sections as you would like. So the general syntax is ```py main.py {assignment_name} {lab_section1} {lab_section2}```, where you can add as many lab sections as needed. For example, if you were distributing the assignments for Lab 5 to sections L02, L03, and L04 the command line argument you would run is ```py main.py "Lab 5" L02 L03 L04```.
